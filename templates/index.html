<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OCR PDF với Server AI</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="container my-4">
        <h1 class="text-center mb-4">OCR PDF với Server AI</h1>
        
        <ul class="nav nav-tabs mb-4" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab" aria-controls="home-tab-pane" aria-selected="true">
                    <i class="bi bi-house-door"></i> Trang chính
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="author-tab" data-bs-toggle="tab" data-bs-target="#author-tab-pane" type="button" role="tab" aria-controls="author-tab-pane" aria-selected="false">
                    <i class="bi bi-person"></i> Thông tin tác giả
                </button>
            </li>
        </ul>
        
        <div class="tab-content" id="myTabContent">
            <!-- Tab 1: Main Application -->
            <div class="tab-pane fade show active" id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                <!-- Hardware ID Section -->
                <div class="hardware-id-container">
                    <h4>Hardware ID</h4>
                    <div class="row mb-2">
                        <div class="col">
                            <input type="text" id="hardwareId" class="form-control" readonly>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <div id="activationStatus" class="alert alert-warning">
                                Trạng thái: CHƯA KÍCH HOẠT
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gemini API and Spelling Correction Section -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">Tùy chọn sửa lỗi chính tả</h5>
                    </div>
                    <div class="card-body">
                        <div class="row mb-3">
                            <div class="col">
                                <label for="geminiApiKey" class="form-label">Gemini API Key:</label>
                                <div class="input-group">
                                    <input type="password" class="form-control" id="geminiApiKey" placeholder="Nhập Gemini API Key (không bắt buộc)">
                                    <button class="btn btn-outline-secondary" type="button" id="toggleGeminiKey">
                                        <i class="bi bi-eye"></i>
                                    </button>
                                </div>
                                <div class="form-text">API key để sử dụng Gemini AI sửa lỗi chính tả tiếng Việt</div>
                            </div>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="spellingCorrection">
                            <label class="form-check-label" for="spellingCorrection">
                                Bật tính năng sửa lỗi chính tả (giới hạn 30 trang)
                            </label>
                        </div>
                    </div>
                </div>

                <!-- File Upload Section -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">Chọn file PDF</h5>
                    </div>
                    <div class="card-body">
                        <form id="uploadForm">
                            <div class="mb-3">
                                <input class="form-control" type="file" id="pdfFile" accept=".pdf" disabled>
                                <div id="fileInfo" class="form-text">Chưa chọn file nào</div>
                            </div>
                            <div class="d-grid">
                                <button type="submit" class="btn btn-primary" id="processBtn" disabled>Xử lý OCR</button>
                            </div>
                        </form>

                        <div class="mt-3">
                            <div class="progress mb-2">
                                <div class="progress-bar" id="progressBar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">0%</div>
                            </div>
                            <div id="statusText" class="text-center">Sẵn sàng</div>
                        </div>
                    </div>
                </div>

                <!-- Log Area -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">Nhật ký hoạt động</h5>
                    </div>
                    <div class="card-body">
                        <div id="logArea"></div>
                    </div>
                </div>

                <!-- Results Section -->
                <div id="resultContainer" class="card mb-4">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0">Kết quả OCR</h5>
                        <div>
                            <button id="btnViewImages" class="btn btn-info btn-sm me-2" disabled>Xem hình ảnh</button>
                            <div class="dropdown d-inline-block">
                              <button id="btnExport" class="btn btn-success btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" disabled>
                                Xuất dữ liệu
                              </button>
                              <ul class="dropdown-menu dropdown-menu-end">
                                <li><button class="dropdown-item" id="btnExportWordImage" type="button">
                                  <i class="bi bi-file-earmark-image me-2"></i>Word với hình ảnh
                                </button></li>
                                <li><button class="dropdown-item" id="btnExportWordEquation" type="button">
                                  <i class="bi bi-calculator me-2"></i>Word với công thức toán học
                                </button></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><button class="dropdown-item" id="btnExportZip" type="button">
                                  <i class="bi bi-file-earmark-zip me-2"></i>File ZIP đầy đủ
                                </button></li>
                              </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <textarea id="resultText" class="form-control" readonly></textarea>
                    </div>
                </div>
            </div>
            
            <!-- Tab 2: Author Information -->
            <div class="tab-pane fade" id="author-tab-pane" role="tabpanel" aria-labelledby="author-tab" tabindex="0">
                <div class="card author-card">
                    <div class="card-header">
                        <h4 class="mb-0">Thông tin tác giả</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 text-center mb-4 mb-md-0">
                                <div class="p-3">
                                    <img src="https://ui-avatars.com/api/?name=Nguyễn+Hữu+Phúc&background=random&size=200" class="img-fluid rounded-circle mb-3" alt="Nguyễn Hữu Phúc">
                                    <h4>Nguyễn Hữu Phúc</h4>
                                    <p class="text-muted">Nhà phát triển ứng dụng AI OCR</p>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <h5>Liên hệ</h5>
                                <ul class="list-group list-group-flush mb-4">
                                    <li class="list-group-item d-flex align-items-center">
                                        <i class="bi bi-phone me-3 text-primary"></i>
                                        <span>Zalo: <a href="https://zalo.me/0985692879" target="_blank">0985.692.879</a></span>
                                    </li>
                                    <li class="list-group-item d-flex align-items-center">
                                        <i class="bi bi-facebook me-3 text-primary"></i>
                                        <span>Facebook: <a href="https://www.facebook.com/nhphuclk" target="_blank">facebook.com/nhphuclk</a></span>
                                    </li>
                                    <li class="list-group-item d-flex align-items-center">
                                        <i class="bi bi-globe me-3 text-primary"></i>
                                        <span>Website: <a href="https://www.aiomtpremium.com" target="_blank">aiomtpremium.com</a></span>
                                    </li>
                                    <li class="list-group-item d-flex align-items-center">
                                        <i class="bi bi-youtube me-3 text-primary"></i>
                                        <span>Youtube: <a href="https://www.youtube.com/@aiomtpremium" target="_blank">youtube.com/@aiomtpremium</a></span>
                                    </li>
                                </ul>
                                
                                <h5>Về ứng dụng</h5>
                                <p>Ứng dụng OCR PDF với Server AI giúp nhận diện và trích xuất văn bản từ file PDF với độ chính xác cao, hỗ trợ nhận diện công thức toán học và hình ảnh.</p>
                                <p>Phiên bản này được triển khai trên nền tảng Render.com, sử dụng công nghệ AI tiên tiến để cung cấp kết quả OCR chất lượng cao.</p>
                                
                                <div class="d-flex mt-4">
                                    <a href="https://www.facebook.com/nhphuclk" target="_blank" class="social-icon" title="Facebook">
                                        <i class="bi bi-facebook"></i>
                                    </a>
                                    <a href="https://www.youtube.com/@aiomtpremium" target="_blank" class="social-icon" title="Youtube">
                                        <i class="bi bi-youtube"></i>
                                    </a>
                                    <a href="https://www.aiomtpremium.com" target="_blank" class="social-icon" title="Website">
                                        <i class="bi bi-globe"></i>
                                    </a>
                                    <a href="https://zalo.me/0985692879" target="_blank" class="social-icon" title="Zalo">
                                        <i class="bi bi-chat-dots"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Images Modal -->
        <div class="modal fade" id="imagesModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Hình ảnh từ OCR</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="imagesContainer"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
